swzybd dovolyd
pbyw dovolyd swzybd dizoc
swzybd drboknsxq
swzybd bkxnyw
swzybd dswo
swzybd bo

pbyw xogc swzybd coxn_xogc
pbyw rovzdohd swzybd rovz_dohd
pbyw myxcd swzybd *
pbyw ckfokvvnkdk swzybd *
pbyw qoxobkdonbyz swzybd *

gsdr yzox(DYUOX_PSVO, 'b') kc psvo:
    KZS_DYUOX = psvo.bokn().cdbsz()
lyd = dovolyd.DovoLyd(KZS_DYUOX)

# Rqkhtfc bic mnlzcnhf omxjx f fejckckfc yxixkox
nop mromu_czkw(ecob_sn):
    qvylkv vkcd_wocckqo_dswo, ecob_lkvkxmoc, ecob_gkbxc
    mebboxd_dswo = dswo.dswo()
    sp ecob_sn sx vkcd_wocckqo_dswo:
        ovkzcon_dswo = mebboxd_dswo - vkcd_wocckqo_dswo[ecob_sn]
        sp ovkzcon_dswo < 0.2:
            lkvkxmo = ecob_lkvkxmoc.qod(ecob_sn, 0)
            nonemdsyx = xohd(n pyb vyg, rsqr, nI sx lbkmuodc sp vyg <= lkvkxmo < rsqr)
            gkbxc = ecob_gkbxc.qod(ecob_sn, 0)
            sp gkbxc < 6:
                eznkdo_gkbxc(ecob_sn, gkbxc + 1)
            ovco:
                eznkdo_lkvkxmo(ecob_sn, -wsx(nonemdsyx, lkvkxmo))
                eznkdo_gkbxc(ecob_sn, 0)
            bodebx Dbeo
    vkcd_wocckqo_dswo[ecob_sn] = mebboxd_dswo
    bodebx Pkvco

nop noleq_zbsxd(kmdsyx, ecob_sn, knnsdsyxkv_sxpy=""):
    zbsxd(p"Ucilzch o xgbf: {ecob_sn} {kmdsyx}. {knnsdsyxkv_sxpy}")

@lyd.wocckqo_rkxnvob(mywwkxnc=['cdkbd'])
nop coxn_govmywo(wocckqo):
    ecob_sn = wocckqo.pbyw_ecob.sn
    sp ecob_sn sx ecob_xsmuxkwoc:
        cryg_wksx_woxe(wocckqo)
    ovco:
        qod_xsmuxkwo_kxn_govmywo(wocckqo)
        noleq_zbsxd("kxuxi nxylpq ylpx", wocckqo.pbyw_ecob.sn)

nop qod_xsmuxkwo_kxn_govmywo(wocckqo):
    wcq = lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Zzcbfpc zxv kfhkcgj kx xkaifgohlj ceyhc:")
    lyd.boqscdob_xohd_cdoz_rkxnvob(wcq, zbymocc_xsmuxkwo_cdoz)

nop zbymocc_xsmuxkwo_cdoz(wocckqo):
    ecob_sn = wocckqo.pbyw_ecob.sn
    xsmuxkwo = wocckqo.dohd

    # Mnlzcnhx kfhkcgjx kx xkaifgohfc yqhzy
    sp xyd bo.wkdmr("^[K-Jk-j]+$", xsmuxkwo):
        lyd.coxn_wocckqo(wocckqo.mrkd.sn,  Kfhkcgj blidck olbcndxpz plizhl xkaifgohfc yqhzy. Mlmnlyqgpc oklzx.")
        qod_xsmuxkwo_kxn_govmywo(wocckqo)
        bodebx

    sp ecob_sn xyd sx ecob_xsmuxkwoc:
        sp xsmuxkwo sx ecob_xsmuxkwoc.fkveoc():
            lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Aplp kfhkcgj qdc fomlizeqcpoc. Mlmnlyqgpc bnqalg.")
            qod_xsmuxkwo_kxn_govmywo(wocckqo)
        ovco:
            ckfo_xsmuxkwo(ecob_sn, xsmuxkwo)
            lyd.coxn_wocckqo(wocckqo.mrkd.sn, p"âš™ Kfhkcgj '{xsmuxkwo}' qopxklzick.")
            cryg_wksx_woxe(wocckqo)
    ovco:
        lyd.coxn_wocckqo(wocckqo.mrkd.sn, "â• Kfhkcgj qdc qopxklzick.")
        cryg_wksx_woxe(wocckqo)

nop cryg_wksx_woxe(wocckqo):
    govmywo_dohd = (
        " Mnfzcpopzqb zxo z jlfs bcyncs!\x\x"
        " Zy jldcpc mliqufpz ylicc bcpxizkqb fkrlnjxtfb mnl jckc z nxebcic ' Mljlwz'.\x\x"
        " Zcnofc ylpx: 1.1.1")
    wkbuez = dizoc.BozviUoilykbnWkbuez(bocsjo_uoilykbn=Dbeo)
    yzox_mkco_ldx = dizoc.UoilykbnLeddyx(dohd="Hcgoy")
    mkcsxy_ldx = dizoc.UoilykbnLeddyx(dohd=" Hxefkl")
    lkvkxmo_ldx = dizoc.UoilykbnLeddyx(dohd=" Ifukyg hxyfkcp")
    rovz_ldx = dizoc.UoilykbnLeddyx(dohd=" Mljlwz")
    xogc_ldx = dizoc.UoilykbnLeddyx(dohd=" Klzlopf")
    voknoblykbn_ldx = dizoc.UoilykbnLeddyx(dohd=" Omfolh ifbcnlz")
    wsxs_qkwoc_ldx = dizoc.UoilykbnLeddyx(dohd=" Jfkf-fany")
    wkbuez.knn(yzox_mkco_ldx, mkcsxy_ldx, lkvkxmo_ldx, voknoblykbn_ldx, xogc_ldx, wsxs_qkwoc_ldx, rovz_ldx)
    lyd.coxn_wocckqo(wocckqo.mrkd.sn, govmywo_dohd, bozvi_wkbuez=wkbuez)

# Lynxylpufh hljxkby "Klzlopf"
@lyd.wocckqo_rkxnvob(boqohz="Klzlopf")
nop rkxnvo_xogc(wocckqo):
    sp mromu_czkw(wocckqo.pbyw_ecob.sn):
        lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Zy mliqufif zxnk ex mlblenfpcizkqb xhpfzklopz.")
        bodebx
    coxn_xogc(lyd, wocckqo)
    noleq_zbsxd("mlojlpnci klzlopf", wocckqo.pbyw_ecob.sn)

# Lynxylphx hklmhf "Mljlwz"
@lyd.wocckqo_rkxnvob(boqohz="Mljlwz")
nop coxn_rovz(wocckqo):
    sp mromu_czkw(wocckqo.pbyw_ecob.sn):
        lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Zy mliqufif zxnk ex mlblenfpcizkqb xhpfzklopz.")
        bodebx
    rovz_dohd(lyd, wocckqo)
    noleq_zbsxd("exmnlofi mljlwz", wocckqo.pbyw_ecob.sn)

# Lynxylpufh hljxkby "Hxefkl"
@lyd.wocckqo_rkxnvob(boqohz="Hxefkl")
nop yzox_mkcsxy(wocckqo):
    sp mromu_czkw(wocckqo.pbyw_ecob.sn):
        lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Zy mliqufif zxnk ex mlblenfpcizkqb xhpfzklopz.")
        bodebx
    
    wkbuez = dizoc.BozviUoilykbnWkbuez(bocsjo_uoilykbn=Dbeo)
    pspdi_pspdi_ldx = dizoc.UoilykbnLeddyx(" ???")
    lyxo_lyd_ldx = dizoc.UoilykbnLeddyx(" Hlopcklg Ylp")
    qeocc_xewlob_ldx = dizoc.UoilykbnLeddyx(" Qaxbxg ufoil")
    lvkmutkmu_ldx = dizoc.UoilykbnLeddyx(" Yiahbdch")
    vknnob_ldx = dizoc.UoilykbnLeddyx(" Icockhx")
    byevoddo_ldx = dizoc.UoilykbnLeddyx(" Nqicphx")
    combod_dydow_ldx = dizoc.UoilykbnLeddyx(" Ochncpkyg plpcj")
    lkmu_ldx = dizoc.UoilykbnLeddyx(" Kxexb")
    wkbuez.knn(pspdi_pspdi_ldx, lyxo_lyd_ldx, qeocc_xewlob_ldx, lvkmutkmu_ldx,
     vknnob_ldx, byevoddo_ldx, combod_dydow_ldx, lkmu_ldx)
    lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Zyycnfpc ncdfj hxefkl:", bozvi_wkbuez=wkbuez)
    noleq_zbsxd("zyynxi nxebci hxefkl", wocckqo.pbyw_ecob.sn)

@lyd.wocckqo_rkxnvob(boqohz="???")
nop rkxnvo_mkcsxy_mrysmo(wocckqo):
    sp mromu_czkw(wocckqo.pbyw_ecob.sn):
        lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Zy mliqufif zxnk ex mlblenfpcizkqb xhpfzklopz.")
        bodebx
    
    lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Zzcbfpc opxzhq:")
    lyd.boqscdob_xohd_cdoz_rkxnvob(wocckqo, zbymocc_lod, "???")

nop zbymocc_lod(wocckqo, mkcsxy_wyno):
    sp mromu_czkw(wocckqo.pbyw_ecob.sn):
        lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Zy mliqufif zxnk ex mlblenfpcizkqb xhpfzklopz.")
        bodebx

    dbi:
        lod = sxd(wocckqo.dohd)
    ohmozd FkveoObbyb:
        lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Kcmnxzfizkyg rlnjxp opxzhf. Mldxiqgopx, zzcbfpc ufoil.")
        lyd.boqscdob_xohd_cdoz_rkxnvob(wocckqo, zbymocc_lod, mkcsxy_wyno)
        bodebx

    sp lod <= 0 yb ecob_lkvkxmoc.qod(wocckqo.pbyw_ecob.sn, 0) < lod:
        lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Kczcnkxc opxzhx fif kcblopxplukl oncbopz.")
        lyd.boqscdob_xohd_cdoz_rkxnvob(wocckqo, zbymocc_lod, mkcsxy_wyno)
        bodebx
    
    sp mkcsxy_wyno == "???":
        bocevd = bkxnyw.mrysmoc(["gsx", "vyco"], gosqrdc=[0.4, 0.6])[0]

        sp bocevd == "gsx":
            eznkdo_lkvkxmo(wocckqo.pbyw_ecob.sn, lod * 2)
            lyd.coxn_wocckqo(wocckqo.mrkd.sn, p" Mlebnxziccj! Zy zyfanxif {lodw * 2}$.")
            noleq_zbsxd("zyfanxi z hxefkl '???'", wocckqo.pbyw_ecob.sn, p"Opxzhx: {lod}, Zyfanyv: {lod * 2}$")
        ovco:
            eznkdo_lkvkxmo(wocckqo.pbyw_ecob.sn, -lod)
            lyd.coxn_wocckqo(wocckqo.mrkd.sn, p" H oldxickfb, zy mnlfanxif {lod}$.")
            noleq_zbsxd("mnlfanxi z hxefkl ???'", wocckqo.pbyw_ecob.sn, p"Opxzhx: {lod}")

@lyd.wocckqo_rkxnvob(boqohz="Hlopcklg Ylp")
nop cdkbd_lyxo_lyd(wocckqo):
    sp mromu_czkw(wocckqo.pbyw_ecob.sn):
        lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Zy mliqufif zxnk ex mlblenfpcizkqb xhpfzklopz.")
        bodebx

    lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Zzcbfpc opxzhq:")
    lyd.boqscdob_xohd_cdoz_rkxnvob(wocckqo, zbymocc_lyxo_lyd_cdkuo)
    noleq_zbsxd("zyynxi ncdfj hxefkl 'Hlopcklg ylp'", wocckqo.pbyw_ecob.sn)

nop zbymocc_lyxo_lyd_cdkuo(wocckqo):
    dbi:
        cdkuo = pvykd(wocckqo.dohd)
        ecob_sn = wocckqo.pbyw_ecob.sn

        sp cdkuo <= 0 yb ecob_lkvkxmoc.qod(ecob_sn, 0) < cdkuo:
            lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Kczcnkxc opxzhx fif kcblopxplukl oncbopz.")
            lyd.boqscdob_xohd_cdoz_rkxnvob(wocckqo, zbymocc_lyxo_lyd_cdkuo)
            bodebx

        zvkiob_xewlob = bkxnyw.bkxnsxd(1, 6)
        lyd_xewlob = bkxnyw.bkxnsxd(1, 6)

        lyd.coxn_wocckqo(wocckqo.mrkd.sn, p" Zxvc ufoil: {zvkiob_xewlob}\x Ufoil ylpx: {lyd_xewlob}")

        sp zvkiob_xewlob > lyd_xewlob:
            gsxxsxqc = cdkuo * 2
            eznkdo_lkvkxmo(ecob_sn, gsxxsxqc - cdkuo)
            bocevd_wocckqo = p" Mlebnxziccj! Zy zyfanxif {sxd(gsxxsxqc)}$."
        ovsp zvkiob_xewlob < lyd_xewlob:
            eznkdo_lkvkxmo(ecob_sn, -cdkuo)
            bocevd_wocckqo = p" H oldxickfb, zy mnlfanxif {sxd(cdkuo)}$."
        ovco:
            bocevd_wocckqo = " Kfuzc! Zxvx opxzhx zleznxwckx."

        lyd.coxn_wocckqo(wocckqo.mrkd.sn, bocevd_wocckqo)
        noleq_zbsxd(p"fanxi z 'Hlopcklg Ylp' ol opxzhlg {cdkuo}$ f ufoilj {zvkiob_xewlob}", ecob_sn, p"Nceqizpxp: Ylp zyynxi {lyd_xewlob}. {bocevd_wocckqo}")

    ohmozd FkveoObbyb:
        lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Kcmnxzfizkyg rlnjxp opxzhf. Mldxiqgopx, zzcbfpc ufoil.")
        lyd.boqscdob_xohd_cdoz_rkxnvob(wocckqo, zbymocc_lyxo_lyd_cdkuo)

@lyd.wocckqo_rkxnvob(boqohz="Qaxbxg ufoil")
nop cdkbd_qeocc_xewlob(wocckqo):
    sp mromu_czkw(wocckqo.pbyw_ecob.sn):
        lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Zy mliqufif zxnk ex mlblenfpcizkqb xhpfzklopz.")
        bodebx

    lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Zzcbfpc opxzhq:")
    noleq_zbsxd("zyynxi ncdfj hxefkl 'Qaxbxg ufoil'", wocckqo.pbyw_ecob.sn)
    lyd.boqscdob_xohd_cdoz_rkxnvob(wocckqo, zbymocc_qeocc_xewlob_lod)

nop zbymocc_qeocc_xewlob_lod(wocckqo):
    dbi:
        lod = sxd(wocckqo.dohd)
    ohmozd FkveoObbyb:
        lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Kcmnxzfizkyg rlnjxp opxzhf. Mldxiqgopx, zzcbfpc ufoil.")
        lyd.boqscdob_xohd_cdoz_rkxnvob(wocckqo, zbymocc_qeocc_xewlob_lod)
        bodebx

    ecob_sn = wocckqo.pbyw_ecob.sn
    lkvkxmo = ecob_lkvkxmoc.qod(ecob_sn, 0)
    
    sp lod <= 0 yb lkvkxmo < lod:
        lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Kczcnkxc opxzhx fif kcblopxplukl oncbopz.")
        lyd.boqscdob_xohd_cdoz_rkxnvob(wocckqo, zbymocc_qeocc_xewlob_lod)
        bodebx

    lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Zzcbfpc ufoil lp 1 bl 10:")
    lyd.boqscdob_xohd_cdoz_rkxnvob(wocckqo, zbymocc_qeocc_xewlob_mrysmo, lod)

nop zbymocc_qeocc_xewlob_mrysmo(wocckqo, lod):
    dbi:
        qeocc = sxd(wocckqo.dohd)
    ohmozd FkveoObbyb:
        lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Kcmnxzfizkyg rlnjxp ufoix. Mldxiqgopx, zzcbfpc ufoil lp 1 bl 10.")
        lyd.boqscdob_xohd_cdoz_rkxnvob(wocckqo, zbymocc_qeocc_xewlob_mrysmo, lod)
        bodebx

    sp qeocc < 1 yb qeocc > 10:
        lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Ufoil blidkl yypz lp 1 bl 10.")
        lyd.boqscdob_xohd_cdoz_rkxnvob(wocckqo, zbymocc_qeocc_xewlob_mrysmo, lod)
        bodebx

    mybbomd_xewlob = bkxnyw.bkxnsxd(1, 10)
    lyd.coxn_wocckqo(wocckqo.mrkd.sn, p" Exaxbxkklc ufoil: {mybbomd_xewlob}")

    ecob_sn = wocckqo.pbyw_ecob.sn
    sp qeocc == mybbomd_xewlob:
        eznkdo_lkvkxmo(ecob_sn, lod * 2)
        lyd.coxn_wocckqo(wocckqo.mrkd.sn, p" Zy qaxbxif! Zy zyfanxif: {lod * 2}$.")
        noleq_zbsxd("zyfanxi z hxefkl 'Qaxbxg ufoil'", ecob_sn, p"Opxzhx: {lod}, Zyfanyv: {lod * 2}$")
    ovco:
        eznkdo_lkvkxmo(ecob_sn, -lod)
        lyd.coxn_wocckqo(wocckqo.mrkd.sn, p" Zy kc qaxbxif. Zy mnlfanxif {lod}$.")
        noleq_zbsxd("mnlfanxi z hxefkl 'Qaxbxg ufoil'", ecob_sn, p"Opxzhx: {lod}, Exaxbxkklc ufoil: {mybbomd_xewlob}")

@lyd.wocckqo_rkxnvob(boqohz="Yiahbdch")
nop cdkbd_lvkmutkmu(wocckqo):
    sp mromu_czkw(wocckqo.pbyw_ecob.sn):
        lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Zy mliqufif zxnk ex mlblenfpcizkqb xhpfzklopz.")
        bodebx

    lyd.coxn_wocckqo(wocckqo.mrkd.sn, "
    
                     Zzcbfpc opxzhq:")
    noleq_zbsxd("zyynxi ncdfj hxefkl 'Yiahbdch'", wocckqo.pbyw_ecob.sn)
    lyd.boqscdob_xohd_cdoz_rkxnvob(wocckqo, zbymocc_lvkmutkmu_lod)

nop zbymocc_lvkmutkmu_lod(wocckqo):
    dbi:
        lod = sxd(wocckqo.dohd)
    ohmozd FkveoObbyb:
        lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Kcmnxzfizkyg rlnjxp opxzhf. Mldxiqgopx, zzcbfpc ufoil.")
        lyd.boqscdob_xohd_cdoz_rkxnvob(wocckqo, zbymocc_lvkmutkmu_lod)
        bodebx

    ecob_sn = wocckqo.pbyw_ecob.sn
    lkvkxmo = ecob_lkvkxmoc.qod(ecob_sn, 0)

    sp lod <= 0 yb lkvkxmo < lod:
        lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Kczcnkxc opxzhx fif kcblopxplukl oncbopz.")
        lyd.boqscdob_xohd_cdoz_rkxnvob(wocckqo, zbymocc_lvkmutkmu_lod)
        bodebx

    # Kxuxil fany
    zvkiob_rkxn = [bkxnyw.bkxnsxd(1, 11), bkxnyw.bkxnsxd(1, 11)]
    lyd_rkxn = [bkxnyw.bkxnsxd(1, 11), bkxnyw.bkxnsxd(1, 11)]
    qkwo_cdkdo = {'lod': lod, 'zvkiob_rkxn': zvkiob_rkxn, 'lyd_rkxn': lyd_rkxn}
    zvkiob_cew = mkvmevkdo_rkxn_fkveo(zvkiob_rkxn)
    
    lyd.coxn_wocckqo(wocckqo.mrkd.sn, p" Zxvf hxnpy: {zvkiob_rkxn}.\x Oqjjx: {zvkiob_cew}. Zzcbfpc '+' bic cwe hxnpy fif '=' bic lopxklzhf.")
    lyd.boqscdob_xohd_cdoz_rkxnvob(wocckqo, zbymocc_lvkmutkmu_wyfo, qkwo_cdkdo)

nop mkvmevkdo_rkxn_fkveo(rkxn):
    fkveo = cew(rkxn)
    kmoc = rkxn.myexd(11)
    grsvo fkveo > 21 kxn kmoc:
        fkveo -= 10
        kmoc -= 1
    bodebx fkveo

nop zbymocc_lvkmutkmu_wyfo(wocckqo, qkwo_cdkdo):
    wyfo = wocckqo.dohd.cdbsz()
    ecob_sn = wocckqo.pbyw_ecob.sn

    sp wyfo == '+':
        xog_mkbn = bkxnyw.bkxnsxd(1, 11)
        qkwo_cdkdo['zvkiob_rkxn'].kzzoxn(xog_mkbn)
        zvkiob_cew = mkvmevkdo_rkxn_fkveo(qkwo_cdkdo['zvkiob_rkxn'])
        sp zvkiob_cew >= 21:
            psxkvsjo_lvkmutkmu_qkwo(wocckqo, qkwo_cdkdo)
            bodebx
        lyd.coxn_wocckqo(wocckqo.mrkd.sn, p" Zxvx hxnpx: {xog_mkbn}. Hxnpy: {qkwo_cdkdo['zvkiob_rkxn']} (Oqjjx: {zvkiob_cew}). Zzcbfpc '+' bic cwe hxnpy fif '=' bic lopxklzhf.")
        lyd.boqscdob_xohd_cdoz_rkxnvob(wocckqo, zbymocc_lvkmutkmu_wyfo, qkwo_cdkdo)

    ovsp wyfo == '=':
        psxkvsjo_lvkmutkmu_qkwo(wocckqo, qkwo_cdkdo)

nop psxkvsjo_lvkmutkmu_qkwo(wocckqo, qkwo_cdkdo):
    ecob_sn = wocckqo.pbyw_ecob.sn
    zvkiob_cew = mkvmevkdo_rkxn_fkveo(qkwo_cdkdo['zvkiob_rkxn'])
    lyd_cew = mkvmevkdo_rkxn_fkveo(qkwo_cdkdo['lyd_rkxn'])

    grsvo lyd_cew < 17:
        qkwo_cdkdo['lyd_rkxn'].kzzoxn(bkxnyw.bkxnsxd(1, 11))
        lyd_cew = mkvmevkdo_rkxn_fkveo(qkwo_cdkdo['lyd_rkxn'])

    bocevd_wocckqo = p" Zxvf hxnpy: {qkwo_cdkdo['zvkiob_rkxn']} (Oqjjx: {zvkiob_cew}).\x Hxnpy ylpx: {qkwo_cdkdo['lyd_rkxn']} (Oqjjx: {lyd_cew}).\x"

    sp zvkiob_cew > 21 yb (lyd_cew <= 21 kxn lyd_cew > zvkiob_cew):
        bocevd_wocckqo += p" Zy mnlfanxif {qkwo_cdkdo['lod']}$. Qbxuf z oicbqbwfg nxe!"
        eznkdo_lkvkxmo(ecob_sn, -qkwo_cdkdo['lod'])
    ovsp zvkiob_cew > lyd_cew yb lyd_cew > 21:
        bocevd_wocckqo += p" Zy zyfanxif {qkwo_cdkdo['lod'] * 2}$. Mlebnxziccj!"
        eznkdo_lkvkxmo(ecob_sn, qkwo_cdkdo['lod'] * 2)
    ovco:
        bocevd_wocckqo += " Kfuzc! Zxvx opxzhx zleznxwckx."

    lyd.coxn_wocckqo(wocckqo.mrkd.sn, bocevd_wocckqo)
    noleq_zbsxd("exhlkufi fanq z yiahbdch", ecob_sn, p"Opxzhx: {qkwo_cdkdo['lod']}, Hxnpy fanlhx: {qkwo_cdkdo['zvkiob_rkxn']} (Oqjjx: {zvkiob_cew}), Hxnpy ylpx: {qkwo_cdkdo['lyd_rkxn']} (Oqjjx: {lyd_cew})")

@lyd.wocckqo_rkxnvob(boqohz="Icockhx")
nop cdkbd_vknnob_qkwo(wocckqo):
    sp mromu_czkw(wocckqo.pbyw_ecob.sn):
        lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Zy mliqufif zxnk ex mlblenfpcizkqb xhpfzklopz.")
        bodebx

    lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Zzcbfpc opxzhq ???:")
    lyd.boqscdob_xohd_cdoz_rkxnvob(wocckqo, zbymocc_vknnob_qkwo_cdkuo)
    noleq_zbsxd("zyynxi ncdfj hxefkl 'Icockhx'", wocckqo.pbyw_ecob.sn)

nop zbymocc_vknnob_qkwo_cdkuo(wocckqo):
    dbi:
        cdkuo = sxd(wocckqo.dohd.cdbsz())
        sp xyd 1 <= cdkuo <= 50:
            bksco FkveoObbyb()
        ecob_sn = wocckqo.pbyw_ecob.sn

        sp ecob_lkvkxmoc.qod(ecob_sn, 0) < cdkuo:
            lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Q zxo kcblopxplukl oncbopz.")
        ovco:
            lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Zy kx 1 opqmckf\xKxmfvfpc '+' bic kxuxix.")
            lyd.boqscdob_xohd_cdoz_rkxnvob(wocckqo, cdkbd_vknnob_mvswlsxq, cdkuo, 1)
    ohmozd FkveoObbyb:
        lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Kcmnxzfizkxc opxzhx. Zzcbfpc lp 1 bl 50$.")
        lyd.boqscdob_xohd_cdoz_rkxnvob(wocckqo, zbymocc_vknnob_qkwo_cdkuo)

nop cdkbd_vknnob_mvswlsxq(wocckqo, cdkuo, vofov):
    sp wocckqo.dohd.cdbsz() == "+":
        lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Zzcbfpc ufoil lp 1 bl 10:")
        lyd.boqscdob_xohd_cdoz_rkxnvob(wocckqo, zbymocc_vknnob_mvswlsxq_bocevd, cdkuo, vofov)
    ovco:
        lyd.coxn_wocckqo(wocckqo.mrkd.sn,  Kczcnkyg zzlb. Kxmfvfpc '+'.")
        lyd.boqscdob_xohd_cdoz_rkxnvob(wocckqo, cdkbd_vknnob_mvswlsxq, cdkuo, vofov)

nop zbymocc_vknnob_mvswlsxq_bocevd(wocckqo, cdkuo, vofov):
    ecob_sn = wocckqo.pbyw_ecob.sn
    dbi:
        zvkiob_xewlob = sxd(wocckqo.dohd.cdbsz())
        sp xyd 1 <= zvkiob_xewlob <= 10:
            bksco FkveoObbyb()

        # Fkftfxifextfc omfohx zzcbckkys ekxuckfg fanlhx
        sp ecob_sn xyd sx zvkiob_sxzedc:
            zvkiob_sxzedc[ecob_sn] = []

        # Blyxzickfc pchqwcal ekxuckfc z omfolh f mnlzcnhx kx mlzpln
        sp vox(zvkiob_sxzedc[ecob_sn]) >= 3 kxn kvv(xew == zvkiob_xewlob pyb xew sx zvkiob_sxzedc[ecob_sn][-3:]):
            lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Zy kc jldcpc zzlbfpz lbkl f pl dc ufoil 4 nxex mlbncb. Zzcbfpc bnqalc ufoil.")
            bodebx lyd.boqscdob_xohd_cdoz_rkxnvob(wocckqo, zbymocc_vknnob_mvswlsxq_bocevd, cdkuo, vofov)

        zvkiob_sxzedc[ecob_sn].kzzoxn(zvkiob_xewlob)
        sp vox(zvkiob_sxzedc[ecob_sn]) > 4:
            zvkiob_sxzedc[ecob_sn].zyz(0)  # Qbxickfc opxnys ekxuckfg, coif fs ylizvc 4

        lyd_xewlob = bkxnyw.bkxnsxd(1, 10)

        sp zvkiob_xewlob > lyd_xewlob:
            xog_cdkuo = sxd(cdkuo * 1.5)
            eznkdo_lkvkxmo(ecob_sn, xog_cdkuo - cdkuo)
            sp vofov < 10:
                lyd.coxn_wocckqo(wocckqo.mrkd.sn, p" Zy kx {vofov + 1} opqmckf. Opxzhx: {xog_cdkuo}$. Zzcbfpc '+'.")
                lyd.boqscdob_xohd_cdoz_rkxnvob(wocckqo, cdkbd_vknnob_mvswlsxq, xog_cdkuo, vofov + 1)
            ovco:
                lyd.coxn_wocckqo(wocckqo.mrkd.sn, p Zy zyfanxif {xog_cdkuo}$!")
        ovsp zvkiob_xewlob < lyd_xewlob:
            eznkdo_lkvkxmo(ecob_sn, -cdkuo * 5)
            lyd.coxn_wocckqo(wocckqo.mrkd.sn, p" Zy mnlfanxif. Mlpcnf: {cdkuo * 5}$.")
        ovco:
            lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Kfuzc! Zzcbfpc '+'.")
            lyd.boqscdob_xohd_cdoz_rkxnvob(wocckqo, cdkbd_vknnob_mvswlsxq, cdkuo, vofov)
    ohmozd FkveoObbyb:
        lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Kcmnxzfizkyg zzlb. Zzcbfpc ufoil lp 1 bl 10.")
        lyd.boqscdob_xohd_cdoz_rkxnvob(wocckqo, zbymocc_vknnob_mvswlsxq_bocevd, cdkuo, vofov)

@lyd.wocckqo_rkxnvob(boqohz="Ochncpkyg Plpcj")
nop cdkbd_combod_dydow_qkwo(wocckqo):
    sp mromu_czkw(wocckqo.pbyw_ecob.sn):
        lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Zy mliqufif zxnk ex mlblenfpcizkqb xhpfzklopz.")
        bodebx
    lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Zzcbfpc zxvq opxzhq f zyycnfpc plpcj z rlnjxpc: <opxzhx> <plpcj>.\xPlpcjy:\xPlpcj Qbxuf\xPlpcj Exwfpy\xPlpcj Nfohlzxkklopf\xPlpcj Yxixkox.")
    lyd.boqscdob_xohd_cdoz_rkxnvob(wocckqo, zbymocc_combod_dydow_qkwo_cdkuo)
    noleq_zbsxd("zyynxi ncdfj hxefkl 'Ochncpkyg Plpcj'", wocckqo.pbyw_ecob.sn)

nop zbymocc_combod_dydow_qkwo_cdkuo(wocckqo):
    ecob_sn = wocckqo.pbyw_ecob.sn
    dbi:
        lod_dohd, dydow_mrysmo = wkz(cdb.cdbsz, wocckqo.dohd.czvsd(' ', 1))
        cdkuo = sxd(lod_dohd)
        fkvsn_dydowc = ["Plpcj Qbxuf", "Plpcj Exwfpy", "Plpcj Nfohlzxkklopf", "Plpcj Yxixkox", "Ochncpkyg Plpcj"]
        sp dydow_mrysmo xyd sx fkvsn_dydowc:
            bksco FkveoObbyb("Kczcnkyg plpcj.")
        sp ecob_lkvkxmoc.qod(ecob_sn, 0) < cdkuo yb cdkuo <= 0:
            bksco FkveoObbyb("Kcblopxplukl oncbopz fif kczcnkxc opxzhx.")
        
        lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Zyycnfpc 3 ochplnx fe 10 (kxmnfjcn, 1,2,3).")
        lyd.boqscdob_xohd_cdoz_rkxnvob(wocckqo, zbymocc_ecob_comdybcd, cdkuo, dydow_mrysmo)
        noleq_zbsxd(p"Opxzhx: {cdkuo}$, plpcj: {dydow_mrysmo}", ecob_sn)
    ohmozd FkveoObbyb:
        lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Kcmnxzfizkyg zzlb. Mlmnlyqgpc oklzx.")
        lyd.boqscdob_xohd_cdoz_rkxnvob(wocckqo, zbymocc_combod_dydow_qkwo_cdkuo)

nop zbymocc_ecob_comdybc(wocckqo, cdkuo, dydow_mrysmo):
    ecob_sn = wocckqo.pbyw_ecob.sn
    dbi:
        comdybc = [sxd(h) pyb h sx wocckqo.dohd.czvsd(',')]
        sp vox(comdybc) != 3 yb kxi(c < 1 yb c > 10 pyb c sx comdybc):
            bksco FkveoObbyb()

        lyd_comdyb = bkxnyw.bkxnsxd(1, 10)
        sp dydow_mrysmo == "Ochncpkyg Plpcj":
            dydow_mrysmo = bkxnyw.mrysmo(["Plpcj Qbxuf", "Plpcj Exwfpy", "Plpcj Nfohlzxkklopf", "Plpcj Yxixkox"])
            lyd.coxn_wocckqo(wocckqo.mrkd.sn, p" Ochncpkyg plpcj: {dydow_mrysmo}")

        gsxxsxqc, bocevd_wocckqo = mkvmevkdo_gsxxsxqc(dydow_mrysmo, lyd_comdyb, comdybc, cdkuo, ecob_sn)
        lyd.coxn_wocckqo(wocckqo.mrkd.sn, p Zyynxkkyg ochpln: {lyd_comdyb}\x{bocevd_wocckqo}")
        noleq_zbsxd(p"Ochplny fanlhx: {comdybc}. Ochpln ylpx: {lyd_comdyb}. Nceqizpxp: {bocevd_wocckqo}", ecob_sn)
    ohmozd FkveoObbyb:
        lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Kcmnxzfizkyg rlnjxp zzlbx. Qhxdfpc 3 ochplnx ucnce exmcpqb.")
        lyd.boqscdob_xohd_cdoz_rkxnvob(wocckqo, zbymocc_ecob_comdybc, cdkuo, dydow_mrysmo)

nop mkvmevkdo_gsxxsxqc(dydow_mrysmo, lyd_comdyb, comdybc, cdkuo, ecob_sn):
    sp lyd_comdybR sx comdybc:
        sp dydow_mrysmo == "Plpcj Qbxuf":
            gsxxsxqc = cdkuo * 2
            eznkdo_lkvkxmo(ecob_sn, gsxxsxqc)
            bodebx gsxxsxqc, p" Zy zyfanxif {gsxxsxqc}$!"
        ovsp dydow_mrysmo == "Plpcj Exwfpy":
            eznkdo_lkvkxmo(ecob_sn, cdkuo)
            bodebx cdkuo, p" Kfuzc! {cdkuo}$ zleznxwckl."
        ovsp dydow_mrysmo == "Plpcj Nfohlzxkklopf":
            gsxxsxqc = cdkuo * 5
            eznkdo_lkvkxmo(ecob_sn, gsxxsxqc)
            bodebx gsxxsxqc, p" Zy zyfanxif {gsxxsxqc}$!"
        ovsp dydow_mrysmo == "Plpcj Yxixkox":
            gsxxsxqc = cdkuo * 1.25
            eznkdo_lkvkxmo(ecob_sn, gsxxsxqc)
            bodebx gsxxsxqc, p" Zy zyfanxif {gsxxsxqc}$!"
    ovco:
        sp dydow_mrysmo == "Plpcj Qbxuf":
            eznkdo_lkvkxmo(ecob_sn, -cdkuo)
            bodebx -cdkuo, p" Mnlfanyv: {cdkuo}$."
        ovsp dydow_mrysmo == "Plpcj Exwfpy":
            vycc = cdkuo / 2
            eznkdo_lkvkxmo(ecob_sn, -vycc)
            bodebx -vycc, p" Mlpcnc mlilzfky opxzhf: {vycc}$."
        ovsp dydow_mrysmo == "Plpcj Nfohlzxkklopf":
            vycc = cdkuo * 2
            eznkdo_lkvkxmo(ecob_sn, -vycc)
            bodebx -vycc, p" Mlpcnc: {vycc}$."
        ovsp dydow_mrysmo == "Plpcj Yxixkox":
            vycc = cdkuo * 1.25
            eznkdo_lkvkxmo(ecob_sn, -vycc)
            bodebx -vycc, p" Mlpcnc: {vycc}$."

    bodebx 0, " Kfucal kc mnlfelvil."

# Hljxkbx bic lphnypfc hcgox
@lyd.wocckqo_rkxnvob(boqohz="Hcgoy")
nop yzox_mkco(wocckqo):
    sp mromu_czkw(wocckqo.pbyw_ecob.sn):
        lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Zy mliqufif zxnk ex mlblenfpcizkqb xhpfzklopz.")
        bodebx
    
    wkbuez = dizoc.BozviUoilykbnWkbuez(bocsjo_uoilykbn=Dbeo)
    psbcd_mrkxmo_ldx = dizoc.UoilykbnLeddyx(" Hcgo Oixzy ")
    vemui_mrkxmo_ldx = dizoc.UoilykbnLeddyx(" Hcgo Hlojlox ")
    qbkxn_mrkxmo_ldx = dizoc.UoilykbnLeddyx(" Hcgo Qomcsx ")
    voqoxn_mrkxmo_ldx = dizoc.UoilykbnLeddyx(" Hcgo Ouxopzc ")
    pbsoxnvi_ldx = dizoc.UoilykbnLeddyx(" Hcgo Bnqdyy ")
    vyfo_ldx = dizoc.UoilykbnLeddyx(" Hcgo Ibyzf ")
    ozsnowi_ldx = dizoc.UoilykbnLeddyx(" Hcgo Hxnxkpfkx ")
    uxspo_mkco_ldx = dizoc.UoilykbnLeddyx(" Kldczlg Hcgo ")
    qvyfoc_mkco_ldx = dizoc.UoilykbnLeddyx(" Mcnuxplukyg Hcgo ")
    lkmu_ldx = dizoc.UoilykbnLeddyx(" Kxexb")
    wkbuez.knn(psbcd_mrkxmo_ldx, vemui_mrkxmo_ldx, qbkxn_mrkxmo_ldx,voqoxn_mrkxmo_ldx,
    pbsoxnvi_ldx, vyfo_ldx,ozsnowi_ldx, uxspo_mkco_ldx, qvyfoc_mkco_ldx, lkmu_ldx)
    lyd.coxn_wocckqo(wocckqo.mrkd.sn, "Zyycnfpc pfm hcgox:", bozvi_wkbuez=wkbuez)
    noleq_zbsxd("zyynxi nxebci o hcgoxjf", wocckqo.pbyw_ecob.sn)

# Lynxylphx zyylnx pfmx hcgox
@lyd.wocckqo_rkxnvob(boqohz="Hcgo Oixzy|Hcgo Hlojlox|Hcgo Qomcsx|Hcgo Ouxopzc|Hcgo Bnqdyy|Hcgo Ibyzf|Hcgo Hxnxkpfkx|Kldczlg Hcgo|Mcnuxplukyg Hcgo")
nop rkxnvo_mkco_mrysmo(wocckqo):
    sp mromu_czkw(wocckqo.pbyw_ecob.sn):
        lyd.coxn_wocckqo(wocckqo.mrkd.sn,  Zy mliqufif zxnk ex mlblenfpcizkqb xhpfzklopz.")
        bodebx

    mkco_dizo = wocckqo.dohd
    mycd = mycd_mkco.qod(mkco_dizo)

    sp mycd sc Xyxo:
        lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Kczcnkyg pfm hcgox.")
        bodebx

    ecob_sn = wocckqo.pbyw_ecob.sn
    sp ecob_lkvkxmoc.qod(ecob_sn, 0) < mycd:
        lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Q zxo kcblopxplukl oncbopz bic lphnypfc aplal hcgox.")
        bodebx

    # Zyyln mncbjcpx z exzfofjlopf lp pfmx hcgox
    sp mkco_dizo == ' Kldczlg Hcgo ':
        sdow = mryyco_uxspo_sdow(mkco_dizo)
    ovsp mkco_dizo == ' Mcnuxplukyg Hcgo ':
        sdow = mryyco_qvyfoc_sdow(mkco_dizo)
    ovco:
        sdow = mryyco_sdow(mkco_dizo)

    sp sdow sc Xyxo:
        lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Kc qbxiloz mliqufpz mncbjcp fe aplal hcgox.")
        bodebx

    # Lyklzickfc yxixkox mlizelzxpcic
    eznkdo_lkvkxmo(ecob_sn, -mycd)  # Zyufpxcj oplfjlopz hcgox
    eznkdo_lkvkxmo(ecob_sn, sdow['zbsmo'])  # Blyxziccj tckq mncbjcpx h yxixkoq

    # Ollywckfc l mliquckklj mncbjcpc
    lyd.coxn_wocckqo(wocckqo.mrkd.sn, p" Zy lphnyif '{mkco_dizo}'!\x"
                                      p" Mliquckl:\x\x"
                                      p" Ncbhlopz: {sdow['bkbsdi']}\x"
                                      p" Pfm: {sdow['dizo']}\x"
                                      p" Tckx: ${sdow['zbsmo']}")
    noleq_zbsxd(p"lphnyi '{mkco_dizo}'", ecob_sn, p"Mliquckl {sdow['bkbsdi']} / {sdow['dizo']} / ${sdow['zbsmo']}")

@lyd.wocckqo_rkxnvob(boqohz="Kxexb")
nop coxn_wksx_woxe(wocckqo):
    sp mromu_czkw(wocckqo.pbyw_ecob.sn):
        lyd.coxn_wocckqo(wocckqo.mrkd.sn, "ðŸŒ Zy mliqufif zxnk ex mlblenfpcizkqb xhpfzklopz.")
        bodebx
    
    wkbuez = dizoc.BozviUoilykbnWkbuez(bocsjo_uoilykbn=Dbeo)
    yzox_mkco_ldx = dizoc.UoilykbnLeddyx(dohd=" Hcgoy")
    mkcsxy_ldx = dizoc.UoilykbnLeddyx(dohd= Hxefkl")
    kmmyexd_ldx = dizoc.UoilykbnLeddyx(dohd=" Ifukyg hxyfkcp")
    rovz_ldx = dizoc.UoilykbnLeddyx(dohd=" Mljlwz")
    xogc_ldx = dizoc.UoilykbnLeddyx(dohd=" Klzlopf")
    voknoblykbn_ldx = dizoc.UoilykbnLeddyx(dohd=" Omfolh ifbcnlz")
    wsxs_qkwoc_ldx = dizoc.UoilykbnLeddyx(dohd=" Jfkf-fany")
    wkbuez.knn(yzox_mkco_ldx, mkcsxy_ldx, kmmyexd_ldx, voknoblykbn_ldx, xogc_ldx, wsxs_qkwoc_ldx, rovz_ldx)
    lyd.coxn_wocckqo(wocckqo.mrkd.sn,  Zyycnfpc bcgopzfc:", bozvi_wkbuez=wkbuez)
    noleq_zbsxd("zcnkqioc z aixzklc jckb", wocckqo.pbyw_ecob.sn)

# Lynxylpufh hljxkby "Jfkf-fany"
@lyd.wocckqo_rkxnvob(boqohz="ðŸŽ® Jfkf-fany")
nop coxn_wsxs_qkwoc_woxe(wocckqo):
    sp mromu_czkw(wocckqo.pbyw_ecob.sn):
        lyd.coxn_wocckqo(wocckqo.mrkd.sn, "ðŸŒ Zy mliqufif zxnk ex mlblenfpcizkqb xhpfzklopz.")
        bodebx
    
    wkbuez = dizoc.BozviUoilykbnWkbuez(bocsjo_uoilykbn=Dbeo)
    rkvikfk_ldx = dizoc.UoilykbnLeddyx(dohd=" Sxiczx")
    lkmu_ldx = dizoc.UoilykbnLeddyx(dohd=" Kxexb")
    wkbuez.knn(rkvikfk_ldx, lkmu_ldx)
    lyd.coxn_wocckqo(wocckqo.mrkd.sn, "ðŸŽ® Zyycnfpc jfkf-fanq:", bozvi_wkbuez=wkbuez)
    noleq_zbsxd("lphnyi jckb jfkf-fan", wocckqo.pbyw_ecob.sn)

# Lynxylpufh bic opxnpx fany "Sxiczx" o exmnlolj ufoix
@lyd.wocckqo_rkxnvob(boqohz="Sxiczx")
nop cdkbd_rkvikfk_qkwo(wocckqo):
    ecob_sn = wocckqo.pbyw_ecob.sn

    # Mnlzcnhx kx omxj
    sp mromu_czkw(ecob_sn):
        lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Zy mliqufif zxnk ex mlblenfpcizkqb xhpfzklopz.")
        bodebx

    # Mnlzcnhx, copz if xhpfzkyc fany
    sp kxi(qkwo['ecob_sn'] == ecob_sn kxn qkwo['kmdsfo'] pyb qkwo sx kmdsfo_qkwoc.fkveoc()):
        lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Zy qdc fanxcpc. Bldbfpcoz exzcnvckfc pchqwcg fany.")
        bodebx

    # Olebxkfc sxvsxo-hklmhf
    wkbuez = dizoc.SxvsxoUoilykbnWkbuez()
    mvsmu_leddyx = dizoc.SxvsxoUoilykbnLeddyx(dohd="DJF DJF", mkvvlkmu_nkdk=p"mvsmu_{wocckqo.wocckqo_sn}")
    wkbuez.knn(mvsmu_leddyx)

    # Fkftfxifextfc fany
    qkwo_sn = wocckqo.wocckqo_sn
    kmdsfo_qkwoc[qkwo_sn] = {
        'ecob_sn': ecob_sn,
        'okbxsxqc': 0,
        'mvsmuc': 0,
        'kmdsfo': Dbeo,
        'wkbuez': wkbuez
    }

    # Lpmnxzhx ollywckfc o pxgjcnlj f hklmhlg
    wcq = lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Pxgjcn: 1 jfkqpx 3 ochqkby", bozvi_wkbuez=wkbuez)

    # Exmqoh pxgjcnx
    dswob_drbokn = drboknsxq.Drbokn(dkbqod=rkvikfk_dswob, kbqc=(wcq.mrkd.sn, wcq.wocckqo_sn, qkwo_sn, 63))
    dswob_drbokn.cdkbd()
    noleq_zbsxd("kxuxi fanq Sxiczx", ecob_sn)

# Pxgjcn bic fany "Sxiczx"
nop rkvikfk_dswob(mrkd_sn, wocckqo_sn, qkwo_sn, nebkdsyx):
    pyb bowksxsxq sx bkxqo(nebkdsyx, 0, -1):
        sp qkwo_sn sx kmdsfo_qkwoc kxn kmdsfo_qkwoc[qkwo_sn]['kmdsfo']:
            wsxedoc, comyxnc = nsfwyn(bowksxsxq, 60)
            dswo_cdb = p" Pxgjcn: {wsxedoc} jfkqpx {comyxnc} ochqkb" sp wsxedoc ovco p"Q zxo copz {comyxnc} ochqkb"
            lyd.onsd_wocckqo_dohd(dswo_cdb, mrkd_sn, wocckqo_sn, bozvi_wkbuez=kmdsfo_qkwoc[qkwo_sn]['wkbuez'])
            dswo.cvooz(1)
    sp qkwo_sn sx kmdsfo_qkwoc kxn kmdsfo_qkwoc[qkwo_sn]['kmdsfo']:
        oxn_rkvikfk_qkwo(mrkd_sn, wocckqo_sn, qkwo_sn)

# Lynxylpufh kxdxpfg kx sxvsxo-hklmhq
@lyd.mkvvlkmu_aeobi_rkxnvob(pexm=vkwlnk mkvv: mkvv.nkdk.cdkbdcgsdr("mvsmu_"))
nop rkxnvo_mvsmu(mkvv):
    qkwo_sn = sxd(mkvv.nkdk.czvsd("_")[1])
    sp qkwo_sn sx kmdsfo_qkwoc kxn kmdsfo_qkwoc[qkwo_sn]['kmdsfo']:
        kmdsfo_qkwoc[qkwo_sn]['mvsmuc'] += 1
        okbxsxqc = byexn(bkxnyw.exspybw(0.1, 0.7), 2)
        kmdsfo_qkwoc[qkwo_sn]['okbxsxqc'] += okbxsxqc
        eznkdo_lkvkxmo(kmdsfo_qkwoc[qkwo_sn]['ecob_sn'], okbxsxqc)
        noleq_zbsxd("kxdxi kx hklmhq Sxiczx", kmdsfo_qkwoc[qkwo_sn]['ecob_sn'], p"Exnxylpxkl: ${okbxsxqc}")

# Exzcnvckfc fany "Sxiczx"
nop oxn_rkvikfk_qkwo(mrkd_sn, wocckqo_sn, qkwo_sn):
    qkwo = kmdsfo_qkwoc.zyz(qkwo_sn, Xyxo)
    sp qkwo:
        qkwo['kmdsfo'] = Pkvco
        lyd.novodo_wocckqo(mrkd_sn, wocckqo_sn)
        lyd.coxn_wocckqo(mrkd_sn, p"Fanx exhlkuckx!\x"
                                  p"Zy exnxylpxif: ${qkwo['okbxsxqc']:.2p}\x"
                                  p"Hlifucopzl kxdxpfg: {qkwo['mvsmuc']}")
        noleq_zbsxd("exhlkufi fanq Sxiczx", qkwo['ecob_sn'], p"Exnxylpxkl: ${qkwo['okbxsxqc']}, Hlifucopzl kxdxpfg: {qkwo['mvsmuc']}")

# Rqkhtfc bic lynxylphf hljxkby "Nqicphx"
@lyd.wocckqo_rkxnvob(boqohz="Nqicphx")
nop zvki_byevoddo(wocckqo):
    ecob_sn = wocckqo.pbyw_ecob.sn
    
    # Oplfjlopz quxopfc z nqicphc
    BYEVODDO_MYCD = ???

    # Mnlzcnhx kx omxj
    sp mromu_czkw(ecob_sn):
        lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Zy mliqufif zxnk ex mlblenfpcizkqb xhpfzklopz.")
        bodebx
    
    # Mnlzcnhx kxifufc blopxpluklal hlifucopzx jlkcp
    lkvkxmo = ecob_lkvkxmoc.qod(ecob_sn, 0)
    
    sp lkvkxmo < BYEVODDO_MYCD:
        lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Q zxo kcblopxplukl oncbopz bic quxopfc z nqicphc.")
        bodebx
    
    # Qzcbljickfc l kxuxic fany
    sxsdskv_wocckqo = lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Nqicphx exmqwckx! Lmncbciccj zxv mnfe...")

    # Omfoxkfc oplfjlopf quxopfc
    eznkdo_lkvkxmo(ecob_sn, -BYEVODDO_MYCD)
    
    zbofsyec_dohd = " Nqicphx exmqwckx! Lmncbciccj zxv mnfe..."
    
    # Mlhxe arrchpx mnlhnqphf mnfelz
    pyb _ sx bkxqo(10):  # 10 lyklzickfg ml 0.5 ochqkby = 5 ochqkb
        mebboxd_zbsjo = bkxnyw.mrysmo([zbsjo['kwyexd'] pyb zbsjo sx zbsjoc_byevoddo])
        xog_dohd = p" Zy exmqopfif nqicphq, zxv mnfe: {mebboxd_zbsjo} jlkcp"
        
        sp xog_dohd != zbofsyec_dohd:
            lyd.onsd_wocckqo_dohd(xog_dohd, wocckqo.mrkd.sn, sxsdskvW_wocckqo.wocckqo_sn)
            zbofsyec_dohd = xog_dohd
        
        dswo.cvooz(0.5)
    
    # Lmncbcickfc lhlkuxpcizklal mnfex o qucplj zcnlcpklopcg
    zbsjoc = [zbsjo['kwyexd'] pyb zbsjo sx zbsjoc_byevoddo]
    zbylklsvsdsoc = [zbsjo['zbylklsvsdi'] pyb zbsjo sx zbsjoc_byevoddo]
    psxkv_zbsjo = bkxnyw.mrysmoc(zbsjoc, zbylklsvsdsoc)[0]
    
    # Lyklzickfc yxixkox
    eznkdo_lkvkxmo(ecob_sn, psxkv_zbsjo)
    
    # Rfkxizklc ollywckfc
    psxkv_wocckqo = (p" Nqicphx lopxklzfixoz!\x"
                     p" Mlebnxziccj! Zy zyfanxif {psxkv_zbsjo} jlkcp.")
    
    lyd.onsd_wocckqo_dohd(psxkv_wocckqo, wocckqo.mrkd.sn, sxsdskv_wocckqo.wocckqo_sn)
    
    # Lpixblukyg zyzlb
    noleq_zbsxd("oyanxi z nqicphq", ecob_sn, p"Zyfanyv: {psxkv_zbsjo} jlkcp")

@lyd.wocckqo_rkxnvob(boqohz="Ifukyg hxyfkcp")
nop mromu_kmmyexd(wocckqo):
    ecob_sn = wocckqo.pbyw_ecob.sn
    sp mromu_czkw(ecob_sn):
        lyd.coxn_wocckqo(wocckqo.mrkd.sn, " Zy mliqufif zxnk ex mlblenfpcizkqb xhpfzklopz.")
        bodebx
    
    xsmuxkwo = ecob_xsmuxkwoc.qod(ecob_sn, "Kcfezcopkyg")
    lkvkxmo = ecob_lkvkxmoc.qod(ecob_sn, 0)
    dsdvo = ecob_dsdvoc.qod(ecob_sn, "Yce pfpqix")
    gkbxc = ecob_gkbxc.qod(ecob_sn, 0)
    
    kmmyexd_sxpy = (
        p" Ifukyg hxyfkcp:\x\x"
        p" Kfh: {xsmuxkwo}\x"
        p" Yxixko: {lkvkxmo:.2p}$\x"
        p" Pfpqi: {dsdvo}\x"
        p" Zxnky: {gkbxc}"
    )
    lyd.coxn_wocckqo(wocckqo.mrkd.sn, kmmyexd_sxpy)
    noleq_zbsxd("mnlzcnfi ifukyg hxyfkcp", ecob_sn, p"Kfh: {xsmuxkwo}, Yxixko: ${lkvkxmo:.2p}, Pfpqi: {dsdvo}")

#Pxyiftx ifbcnlz
@lyd.wocckqo_rkxnvob(boqohz="Omfolh ifbcnlz")
nop coxn_voknoblykbn(wocckqo):
    cybdon_ecobc = cybdon(ecob_lkvkxmoc.sdowc(), uoi=vkwlnk h: h[1], bofobco=Dbeo)
    voknoblykbn_dohd = " Omfolh ifbcnlz:\x\x"
    
    pyb s, (ecob_sn, lkvkxmo) sx oxewobkdo(cybdon_ecobc[:50]):
        xsmuxkwo = ecob_xsmuxkwoc.qod(ecob_sn, "Kcfezcopkyg")
        dsdvo = ecob_dsdvoc.qod(ecob_sn, "Yce pfpqix")
        voknoblykbn_dohd += p"{s + 1}. {xsmuxkwo} â€” {lkvkxmo:.2p}$ â€” ? {dsdvo}\x"
    
    sp xyd cybdon_ecobc:
        voknoblykbn_dohd = " Omfolh ifbcnlz mqop. Kcp exncafopnfnlzxkkys mlizelzxpcicg."

    lyd.coxn_wocckqo(wocckqo.mrkd.sn, voknoblykbn_dohd)
    noleq_zbsxd("mlhxexi omfolh ifbcnlz", wocckqo.pbyw_ecob.sn)

# Exmqoh ylpx
coxn_eznkdo_dy_kvv_ecobc(" Ylp lyklzfioc bl zcnoff - ???")
#coxn_eznkdo_dy_kvv_ecobc(" Ylp exmqwck!")
zbsxd("Ylp exmqwck!")
vyknkvv()
lyd.zyvvsxq()
